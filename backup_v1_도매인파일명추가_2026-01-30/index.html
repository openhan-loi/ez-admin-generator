<!doctype html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>EzAdmin Upload Generator - 재고 DB 동기화</title>
		<meta name="description" content="패킹리스트 분석 및 이지어드민 업로드 파일 생성기" />
		<link rel="stylesheet" href="style.css" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>
	</head>
	<body>
		<div class="app-container">
			<!-- 헤더 -->
			<header class="app-header">
				<div class="header-content">
					<h1>EzAdmin Upload Generator</h1>
					<div class="header-subtitle">재고 DB 동기화</div>
				</div>
				<div class="progress-indicator">
					<div class="progress-step active" data-step="1">
						<div class="step-number">1</div>
						<div class="step-label">파일 업로드</div>
					</div>
					<div class="progress-line"></div>
					<div class="progress-step" data-step="2">
						<div class="step-number">2</div>
						<div class="step-label">분석</div>
					</div>
					<div class="progress-line"></div>
					<div class="progress-step" data-step="3">
						<div class="step-number">3</div>
						<div class="step-label">매핑</div>
					</div>
					<div class="progress-line"></div>
					<div class="progress-step" data-step="4">
						<div class="step-number">4</div>
						<div class="step-label">완료</div>
					</div>
				</div>
			</header>

			<!-- 메인 컨텐츠 -->
			<main class="main-content">
				<!-- Step 1: 파일 업로드 섹션 -->
				<section id="upload-section" class="section active">
					<div class="section-header">
						<h2>📦 패킹리스트 업로드</h2>
						<p class="section-description">엑셀 파일을 업로드하여 제품 정보를 추출합니다</p>
					</div>

					<div class="upload-card">
						<!-- 도매인 선택/등록 -->
						<div class="wholesaler-section">
							<label class="form-label">🏢 도매인 선택</label>
							<div class="wholesaler-controls">
								<select id="wholesaler-select" class="form-select">
									<option value="">-- 도매인 선택하기 --</option>
								</select>
								<button id="add-wholesaler-btn" class="btn btn-secondary">
									<span class="btn-icon">➕</span>
									새 도매인 등록
								</button>
							</div>

							<!-- 도매인 추가 폼 (숨김) -->
							<div id="wholesaler-form" class="wholesaler-form hidden">
								<div class="input-group">
									<input
										type="text"
										id="new-wholesaler-input"
										class="form-input"
										placeholder="도매인 이름을 입력하세요"
									/>
									<div class="input-actions">
										<button id="save-wholesaler-btn" class="btn btn-primary">저장</button>
										<button id="cancel-wholesaler-btn" class="btn btn-ghost">취소</button>
									</div>
								</div>
							</div>

							<!-- 등록된 도매인 목록 -->
							<div id="wholesaler-tags" class="wholesaler-tags"></div>
						</div>

						<!-- 파일 업로드 영역 -->
						<div class="file-upload-area" id="file-upload-area">
							<div class="upload-icon">📄</div>
							<div class="upload-text">
								<h3>패킹리스트 파일을 드래그하거나 클릭하세요</h3>
								<p>지원 형식: .xlsx, .xls, .csv</p>
							</div>
							<input type="file" id="file-input" accept=".xlsx,.xls,.csv" hidden />
							<button class="btn btn-primary" id="select-file-btn">파일 선택</button>
						</div>

						<!-- 업로드된 파일 정보 -->
						<div id="file-info" class="file-info hidden">
							<div class="file-details">
								<div class="file-icon">📊</div>
								<div class="file-meta">
									<div class="file-name" id="file-name"></div>
									<div class="file-size" id="file-size"></div>
								</div>
							</div>
							<button class="btn btn-danger" id="remove-file-btn">
								<span class="btn-icon">🗑️</span>
								제거
							</button>
						</div>

						<!-- 분석 버튼 -->
						<div class="action-buttons">
							<button id="analyze-btn" class="btn btn-primary btn-large" disabled>
								<span class="btn-icon">🔍</span>
								파일 분석하기
							</button>
						</div>
					</div>
				</section>

				<!-- Step 2: 분석 중 섹션 -->
				<section id="analyzing-section" class="section">
					<div class="analyzing-container">
						<div class="loader"></div>
						<h2>패킹리스트 분석 중...</h2>
						<p>제품명, 색상, 사이즈, 수량 정보를 추출하고 있습니다</p>
						<div class="progress-bar">
							<div class="progress-bar-fill" id="progress-bar-fill"></div>
						</div>
						<div class="progress-text" id="progress-text">0%</div>
					</div>
				</section>

				<!-- Step 3: 분석 결과 섹션 -->
				<section id="results-section" class="section">
					<div class="section-header">
						<h2>✅ 분석 완료</h2>
						<p class="section-description">추출된 제품 정보를 확인하세요</p>
					</div>

					<div class="results-card">
						<div class="results-summary">
							<div class="summary-item">
								<div class="summary-label">분석된 제품</div>
								<div class="summary-value" id="total-products">0</div>
							</div>
							<div class="summary-item">
								<div class="summary-label">도매인</div>
								<div class="summary-value" id="selected-wholesaler">-</div>
							</div>
							<div class="summary-item">
								<div class="summary-label">총 수량</div>
								<div class="summary-value" id="total-quantity">0</div>
							</div>
						</div>

						<!-- 추출된 데이터 테이블 -->
						<div class="table-container">
							<table class="data-table">
								<thead>
									<tr>
										<th>번호</th>
										<th>도매인</th>
										<th>파일명</th>
										<th>제품명</th>
										<th>색상</th>
										<th>사이즈</th>
										<th>수량</th>
									</tr>
								</thead>
								<tbody id="results-table-body">
									<!-- 동적으로 생성됨 -->
								</tbody>
							</table>
						</div>

						<div class="action-buttons">
							<button id="download-excel-btn" class="btn btn-secondary">
								<span class="btn-icon">�</span>
								엑셀 다운로드
							</button>
							<button id="restart-btn" class="btn btn-secondary">
								<span class="btn-icon">🔄</span>
								새로 시작
							</button>
							<button id="next-step-btn" class="btn btn-primary btn-large">
								<span class="btn-icon">➡️</span>
								다음 단계 (매핑)
							</button>
						</div>
					</div>
				</section>
			</main>

			<!-- 토스트 알림 -->
			<div id="toast-container" class="toast-container"></div>
		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
		<script src="app.js"></script>
	</body>
</html>
